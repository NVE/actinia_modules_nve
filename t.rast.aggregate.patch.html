<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
 <meta name="Author" content="GRASS Development Team">
 <meta http-equiv="content-language" content="en-us">
 <meta name="viewport" content="width=device-width, initial-scale=1">
 <title>t.rast.aggregate.patch - GRASS GIS manual</title>
 <meta name="description" content="t.rast.aggregate.patch: Aggregate multiple space time raster maps into mosaics with the given granualrity using r.patch or r.buildvrt.">
 <meta name="keywords" content="temporal, aggregation, patch, raster, merge, patching, granularity, strds">
 <link rel="stylesheet" href="grassdocs.css" type="text/css">
</head>
<body bgcolor="white">
<div id="container">

<a href="file:///usr/lib/grass84/docs/html/index.html"><img src="grass_logo.png" alt="GRASS logo"></a>
<script>
// Create hamburger menu TOC HTML elements by the JavaScript
let temp = document.createElement('template');
const toc = '<ul class="toc-mobile-screen" id="toc-mobile-screen">' + 
'<li><a class="toc-item" href="#description">DESCRIPTION</a>' + 
'</li>' + 
'<li><a class="toc-item" href="#example">EXAMPLE</a>' + 
'</li>' + 
'<li><a class="toc-item" href="#see-also">SEE ALSO</a>' + 
'</li>' + 
'<li><a class="toc-item" href="#author">AUTHOR</a>' + 
'</li>' +
'<a class="close" href="#">' +
'<img src="./hamburger_menu_close.svg" alt="close">' +
'</a>' +
'</ul>' +
'<a class="hamburger" href="#toc-mobile-screen">' +
'<img src="./hamburger_menu.svg" alt="menu">' +
'</a>';
temp.innerHTML = toc;
const grassLogoLink = document.getElementsByTagName("img")[0];
grassLogoLink.after(temp.content);
</script>
<hr class="header">

<h2>NAME</h2>
<em><b>t.rast.aggregate.patch</b></em>  - Aggregate multiple space time raster maps into mosaics with the given granualrity using r.patch or r.buildvrt.
<h2>KEYWORDS</h2>
<a href="file:///usr/lib/grass84/docs/html/temporal.html">temporal</a>, <a href="file:///usr/lib/grass84/docs/html/topic_aggregation.html">aggregation</a>, <a href="file:///usr/lib/grass84/docs/html/keywords.html#patch">patch</a>, <a href="file:///usr/lib/grass84/docs/html/keywords.html#raster">raster</a>, <a href="file:///usr/lib/grass84/docs/html/keywords.html#merge">merge</a>, <a href="file:///usr/lib/grass84/docs/html/keywords.html#patching">patching</a>, <a href="file:///usr/lib/grass84/docs/html/keywords.html#granularity">granularity</a>, <a href="file:///usr/lib/grass84/docs/html/keywords.html#strds">strds</a>
<h2>SYNOPSIS</h2>
<div id="name"><b>t.rast.aggregate.patch</b><br></div>
<b>t.rast.aggregate.patch --help</b><br>
<div id="synopsis"><b>t.rast.aggregate.patch</b> [-<b>egnzsv</b>] <b>input</b>=<em>name</em>  [<b>where</b>=<em>sql_query</em>]   [<b>sort</b>=<em>string</em>]  <b>output</b>=<em>name</em>  [<b>title</b>=<em>string</em>]   [<b>description</b>=<em>string</em>]   [<b>basename</b>=<em>string</em>]   [<b>offset</b>=<em>integer</em>]   [<b>suffix</b>=<em>string</em>]  <b>granularity</b>=<em>string</em>  [<b>sampling</b>=<em>name</em>[,<i>name</i>,...]]   [<b>nprocs</b>=<em>integer</em>]   [<b>region_relation</b>=<em>string</em>]   [--<b>overwrite</b>]  [--<b>help</b>]  [--<b>verbose</b>]  [--<b>quiet</b>]  [--<b>ui</b>] 
</div>

<div id="flags">
<h3>Flags:</h3>
<dl>
<dt><b>-e</b></dt>
<dd>Extend existing STRDS (requires overwrite flag)</dd>

<dt><b>-g</b></dt>
<dd>Use r.buildvrt.gdal for patching (for GDAL-linked raster maps)</dd>

<dt><b>-n</b></dt>
<dd>Register Null maps</dd>

<dt><b>-z</b></dt>
<dd>Use zero (0) for transparency instead of NULL</dd>

<dt><b>-s</b></dt>
<dd>Do not create color and category files</dd>

<dt><b>-v</b></dt>
<dd>Patch to virtual raster map (r.buildvrt)</dd>

<dt><b>--overwrite</b></dt>
<dd>Allow output files to overwrite existing files</dd>
<dt><b>--help</b></dt>
<dd>Print usage summary</dd>
<dt><b>--verbose</b></dt>
<dd>Verbose module output</dd>
<dt><b>--quiet</b></dt>
<dd>Quiet module output</dd>
<dt><b>--ui</b></dt>
<dd>Force launching GUI dialog</dd>
</dl>
</div>

<div id="parameters">
<h3>Parameters:</h3>
<dl>
<dt><b>input</b>=<em>name</em>&nbsp;<b>[required]</b></dt>
<dd>Name of the input space time raster dataset</dd>

<dt><b>where</b>=<em>sql_query</em></dt>
<dd>WHERE conditions of SQL statement without 'where' keyword used in the temporal GIS framework</dd>
<dd>Example: start_time &gt; '2001-01-01 12:30:00'</dd>

<dt><b>sort</b>=<em>string</em></dt>
<dd>Sort order of input maps using start_time (default: desc = newest first)</dd>
<dd>Options: <em>asc, desc</em></dd>
<dd>Default: <em>desc</em></dd>

<dt><b>output</b>=<em>name</em>&nbsp;<b>[required]</b></dt>
<dd>Name of the output space time raster dataset</dd>

<dt><b>title</b>=<em>string</em></dt>
<dd>Title of the resulting STRDS</dd>

<dt><b>description</b>=<em>string</em></dt>
<dd>Description of the resulting STRDS</dd>

<dt><b>basename</b>=<em>string</em></dt>
<dd>Basename for output raster maps</dd>

<dt><b>offset</b>=<em>integer</em></dt>
<dd>Offset that is used to create the output map ids, output map id is generated as: basename_ (count + offset)</dd>
<dd>Default: <em>0</em></dd>

<dt><b>suffix</b>=<em>string</em></dt>
<dd>Suffix to add at basename: set 'gran' for granularity, 'time' for the full time format, 'num' for numerical suffix with a specific number of digits (default %05)</dd>
<dd>Default: <em>gran</em></dd>

<dt><b>granularity</b>=<em>string</em>&nbsp;<b>[required]</b></dt>
<dd>Aggregation granularity, format absolute time "x years, x months, x weeks, x days, x hours, x minutes, x seconds" or an integer value for relative time</dd>

<dt><b>sampling</b>=<em>name[,<i>name</i>,...]</em></dt>
<dd>The method to be used for sampling the input dataset</dd>
<dd>Options: <em>equal, overlaps, overlapped, starts, started, finishes, finished, during, contains</em></dd>
<dd>Default: <em>contains</em></dd>

<dt><b>nprocs</b>=<em>integer</em></dt>
<dd>Number of threads for parallel computing</dd>
<dd>Default: <em>1</em></dd>

<dt><b>region_relation</b>=<em>string</em></dt>
<dd>Process only maps with this spatial relation to the current computational region</dd>
<dd>Options: <em>overlaps, contains, is_contained</em></dd>

</dl>
</div>
<div class="toc">
<h4 class="toc">Table of contents</h4>
<ul class="toc">
    <li class="toc"><a href="#description" class="toc">DESCRIPTION</a></li>
    <li class="toc"><a href="#example" class="toc">EXAMPLE</a></li>
    <li class="toc"><a href="#see-also" class="toc">SEE ALSO</a></li>
    <li class="toc"><a href="#author" class="toc">AUTHOR</a></li>
</ul>
</div>
<h2><a name="description">DESCRIPTION</a></h2>
<em>t.rast.aggregate.patch</em> aggregates raster maps within a
space time raster dataset (STRDS) using <em>r.patch</em> or <b>r.buildvrt</b>.
Hence, it is a simple wrapper for those two raster modules and
written oriented on <em>
<a href="https://grass.osgeo.org/grass-stable/manuals/t.rast.aggregate.html">
t.rast.aggregate</a></em>

<p>
By default <em>r.patch</em> is used to create a patched raster map.
Especially for temporary data, using <em>r.buildvrt</em> for patching
can be advantageous with regards to processing time and storage space.
<em>r.buildvrt</em> creates a virtual raser map and is used when the
<b>v-flag</b> is given. The <b>v-flag</b> excludes the <b>z-flag</b>
(using zero (0) for transperancy) and <b>s-flag (do not create color
and category files)</b>.

<p>
Both input and output of this module is a single space time raster dataset.
A subset of the input space time raster dataset can be selected using the
<b>where</b> option. In addition, input maps can be filtered spatially using
the <b>region_relation</b> option.

<p>
The raster map layers in the input STRDS are grouped and patched using the
given <b>granularity</b> and the <em>semantic_label</em> assigned to the
input raster maps.

<p>
If present, the semantic label is written into the name of the resulting
raster maps. The naming pattern for output raster maps is <em>basename</em>,
<em>semantic_label</em>, <em>suffix</em> separated by underscore.

<p>
The sorting of the raster map layer can be set using
the <b>sort</b> option. Be aware that the sorting of the maps significantly
influences the result if input maps overlap spatially. By default the maps are
sorted in descending order (<b>desc</b>) using <i>start_time</i> so that the
newest raster map is the first input map in <b>r.patch</b>/<b>r.buildvrt</b>,
thus ends up on top of the mosaic.

<p>
The resulting raster maps can also be registered into an existing
Space Time Raster Dataset if the <b>e-flag</b> and <b>--overwrite</b> flags
are set.

<p>
Please note that the color table of the first input raster is used for the
resulting map when the <b>v-flag</b> is used. Values in the resulting
raster map that exeed the range of that first raster map will then be
rendered on the screen like no data. In that case, please update the
color table or the resulting map with <b>t.rast.colors</b>

<h2><a name="example">EXAMPLE</a></h2>
The example uses the North Carolina extra time series of MODIS Land Surface Temperature
maps (<a href="https://grass.osgeo.org/download/data/">download</a>).
(The mapset has to be unzip in one of the North Carolina locations.)
<p>
Patching the MODIS Land Surface Temperature for 2016 (filling missing pixels by subsequent maps in the time series):
<div class="code"><pre>
t.rast.aggregate.patch input=LST_Day_monthly@modis_lst output=LST_Day_patched_2016 \
  --overwrite --verbose -v title=LST_Day_patched description=LST_Day_patched \
  granularity="1 year" basename=LST_Day_patched \
  where="start_time >= '2016-01' and start_time <= '2016-12'"
t.info LST_Day_patched_2016
</pre></div>
<p>
Patching the MODIS Land Surface Temperature for 2016 (filling missing pixels by
subsequent maps in the time series) using a virtual mosaic (<b>r.buildvrt</b>):
<div class="code"><pre>
t.rast.aggregate.patch input=LST_Day_monthly@modis_lst output=LST_Day_patched_2016_vrt \
  --overwrite --verbose -v title=LST_Day_patched description=LST_Day_patched \
  granularity="1 year" basename=LST_Day_patched \
  where="start_time >= '2016-01' and start_time <= '2016-12'"
# Assign a new color table that covers the entire range of the resulting map
t.rast.colors input=LST_Day_patched_2016_vrt color=grey
t.info LST_Day_patched_2016_vrt
</pre></div>

<h2><a name="see-also">SEE ALSO</a></h2>

<em>
<a href="https://grass.osgeo.org/grass-stable/manuals/r.buildvrt.html">r.buildvrt</a>,
<a href="https://grass.osgeo.org/grass-stable/manuals/r.patch.html">r.patch</a>,
<a href="https://grass.osgeo.org/grass-stable/manuals/t.rast.aggregate.html">t.rast.aggregate</a>,
<a href="https://grass.osgeo.org/grass-stable/manuals/t.rast.series.html">t.rast.series</a>,
<a href="https://grass.osgeo.org/grass-stable/manuals/t.create.html">t.create</a>,
<a href="https://grass.osgeo.org/grass-stable/manuals/t.info.html">t.info</a>,
<a href="https://grass.osgeo.org/grass-stable/manuals/t.merge.html">t.merge</a>
<a href="https://grass.osgeo.org/grass-stable/manuals/addons/t.rast.patch.html">t.rast.patch</a>,
</em>
<p>
<a href="http://grasswiki.osgeo.org/wiki/Temporal_data_processing">Temporal data processing Wiki</a>

<h2><a name="author">AUTHOR</a></h2>

Stefan Blumentrath, NVE
<h2>SOURCE CODE</h2>
<p>
  Available at:
  <a href="">t.rast.aggregate.patch source code</a>
  (<a href="">history</a>)
</p>
<p>
  Accessed: Tuesday Feb 04 13:53:33 2025
</p>
<hr class="header">
<p>
<a href="file:///usr/lib/grass84/docs/html/index.html">Main index</a> |
<a href="file:///usr/lib/grass84/docs/html/temporal.html">Temporal index</a> |
<a href="file:///usr/lib/grass84/docs/html/topics.html">Topics index</a> |
<a href="file:///usr/lib/grass84/docs/html/keywords.html">Keywords index</a> |
<a href="file:///usr/lib/grass84/docs/html/graphical_index.html">Graphical index</a> |
<a href="file:///usr/lib/grass84/docs/html/full_index.html">Full index</a>
</p>
<p>
&copy; 2003-2024
<a href="https://grass.osgeo.org">GRASS Development Team</a>,
GRASS GIS 8.4.0 Reference Manual
</p>

</div>
</body>
</html>
